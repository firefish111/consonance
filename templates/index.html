<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Consonance and Vowels</title>
  </head>
  <body>
    <h1>lorem ipsum dolor sit amet</h1>
    <p>lorem ipsum dolor sit amet, consectetur adipiscing elit</p>
    <div>
      {% for key, settings in input_data.items() %}
        <label for="{{ key }}">{{ settings.name }}</label>
        <input type="{{ settings.type }}"
          min="{{ settings.bounds[0] }}"
          step="{{ settings.bounds[1] }}"
          max="{{ settings.bounds[2] }}"
          value="{{ defaults[key] }}"
          name="{{ key }}"
          id="{{ key }}"
        />
        {% if settings.percentage %}
          <div name="{{key}}" class="percentage"></div>
        {% endif %}
        <br/>
      {% endfor %}

      <label for="sentence">Text to convert</label>
      <textarea name="sentence" id="sentence" rows="5" cols="30"></textarea>
      <br/>

      <button id="play">Play audio</button>
    </div>
    <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/audio.js') }}"></script>
    <script src="{{ url_for('static', filename='js/websock.js') }}"></script>
    <script>
      const playBut = document.querySelector("button#play");

      function set_button(enabled) {
        playBut.disabled = !enabled;
      }

      init_ws();
      init_audio();

      playBut.addEventListener("click", () => writer.write(JSON.stringify(collate_config()))); // TODO: make from textbox
    </script>
  </body>
</html>
